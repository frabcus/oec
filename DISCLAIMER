It should go without saying - but we are saying it anyway - that we make absolutely no promises as to the quality or the usefulness of any of the contents in this repository.

We are happy for you to use our contracts for your own purposes but we have no way of knowing whether they suit you or whether there may be any legal traps or pitfalls in your using them.

We also do not keep our files up to date. Employment law and practice change. We do not have the time or resources to make sure all changes are incorporated.
RESTMAILURL = "http://restmail.net/mail/"
BASEURL = "https://api.accounts.firefox.com/"
if os.getenv("PUBLIC_URL"):
    BASEURL = os.getenv("PUBLIC_URL")
    assert BASEURL.endswith("/")

HOST = urlparse.urlparse(BASEURL)[1]
if HOST.split(":")[0] == "localhost":
    # HAWK includes the hostname in the HMAC'ed request string, and
    # fxa-auth-server listens on "127.0.0.1". If we connect with "localhost",
    # the request will make it there, but the HMAC won't match.
    raise ValueError("use '127.0.0.1', not 'localhost'")

def makeRandom():
    return os.urandom(32)

def HMAC(key, msg):
    return hmac.new(key, msg, sha256).digest()

def printhex(name, value, groups_per_line=1):
    assert isinstance(value, binary_type), type(value)
    h = binascii.hexlify(value).decode("ascii")
    groups = [h[i:i+16] for i in range(0, len(h), 16)]
    lines = [" ".join(groups[i:i+groups_per_line])
             for i in range(0, len(groups), groups_per_line)]
    print_("%s:" % name)
    for line in lines:
        print_(line)
    print_()
